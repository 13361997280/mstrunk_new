webpackJsonp([6],{456:function(t,e,s){function a(t){s(694)}var l=s(0)(s(649),s(714),a,null,null);t.exports=l.exports},486:function(t,e,s){"use strict";function a(t){return(0,c.fetch)({url:"/bus/task/list.do?"+t,method:"get"})}function l(){return(0,c.fetch)({url:"/sysconfig/getAccounts.do",method:"get"})}function n(t,e){return(0,c.fetch)({url:"/bus/task/enable.do",method:"post",data:{id:t,status:e}})}function r(t){return(0,c.fetch)({url:"/bus/task/save.do",method:"post",data:t})}function i(){return(0,c.fetch)({url:"/bus/taskset/getConfTaskSet.do",method:"get"})}function o(t){return(0,c.fetch)({url:"/bus/taskset/save.do",method:"post",data:t})}function u(t){return(0,c.fetch)({url:"/bus/taskset/getHisTaskSet.do?"+t,method:"get"})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchList=a,e.fetchUserList=l,e.setTaskStatus=n,e.addTask=r,e.getSetting=i,e.updateSetting=o,e.fetchHistory=u;var c=s(10)},649:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(486),l=s(87);e.default={name:"task",data:function(){return{list:null,total:null,listLoading:!0,listQuery:{pageNo:1,pageSize:10,taskId:"",addScoreStart:"",addScoreEnd:"",subScoreStart:"",subScoreEnd:"",isDuplicate:"",updateTime:"",operator:"",status:""},selectOptions:{isDuplicate:[{value:"",label:"全部"},{value:"Y",label:"可重复"},{value:"N",label:"不可重复"}],users:[""],status:[{value:"",label:"全部"},{value:0,label:"正常"},{value:1,label:"下架"}]}}},created:function(){this.getUsers(),this.getList()},mounted:function(){},filters:{statusTextFilter:function(t){return["正常","已下架"][t]}},methods:{getUsers:function(){var t=this;(0,a.fetchUserList)().then(function(e){if(e.success){t.selectOptions.users=[{value:"",label:"全部"}];for(var s=0;s<e.data.length;s++)t.selectOptions.users.push({value:e.data[s],label:e.data[s]})}else t.$notify({title:"失败",message:e.message,type:"error",duration:2e3})})},getList:function(){var t=this;this.listLoading=!0;var e=[];for(var s in this.listQuery)if("updateTime"==s){var n=this.listQuery[s];if(void 0!=n[0]||void 0!=n[1]){var r=(0,l.formatDate)(new Date(n[0]),"yyyy-MM-dd hh:mm:ss"),i=(0,l.formatDate)(new Date(n[1]),"yyyy-MM-dd hh:mm:ss");e.push("updateTimeStart="+encodeURIComponent(r)),e.push("updateTimeEnd="+encodeURIComponent(i))}else e.push("updateTimeStart="),e.push("updateTimeEnd=")}else e.push(s+"="+this.listQuery[s]);(0,a.fetchList)(e.join("&")).then(function(e){e.success?(t.list=e.data,t.total=e.recordsTotal,t.listLoading=!1):t.$notify({title:"失败",message:e.message,type:"error",duration:2e3})})},handleFilter:function(){this.getList()},clearFilter:function(){this.listQuery={pageNo:1,pageSize:10,taskId:"",addScoreStart:"",addScoreEnd:"",subScoreStart:"",subScoreEnd:"",isDuplicate:"",updateTime:"",operator:"",status:""},this.getList()},handleSizeChange:function(t){this.listQuery.pageSize=t,this.getList()},handleCurrentChange:function(t){this.listQuery.pageNo=t,this.getList()},addTask:function(){this.$router.push("/task/taskAdd")},setTask:function(){this.$router.push("/task/taskSettings")},setTaskStatus:function(t,e){var s=this;this.loading=!0,(0,a.setTaskStatus)(t.id,e).then(function(a){s.loading=!1,a.success?(s.$message({message:"操作成功",type:"success"}),t.status=e):s.$message({message:a.message,type:"error"})})}}}},659:function(t,e,s){e=t.exports=s(440)(!0),e.push([t.i,".task-container{padding:15px;position:relative;width:100%}.task-container .btn-group{margin:10px}.form-inline .el-form-item{margin-right:20px}","",{version:3,sources:["E:/eagle/Credit-BA-Management/src/views/task/index.vue"],names:[],mappings:"AACA,gBACE,aAAc,AACd,kBAAmB,AACnB,UAAY,CACb,AACD,2BACI,WAAa,CAChB,AAMD,2BACI,iBAAmB,CACtB",file:"index.vue",sourcesContent:["\n.task-container {\n  padding: 15px;\n  position: relative;\n  width: 100%;\n}\n.task-container .btn-group {\n    margin: 10px;\n}\n.form-inline {\n  /*        input{\n            width:140px;;\n        }*/\n}\n.form-inline .el-form-item {\n    margin-right: 20px;\n}\n"],sourceRoot:""}])},694:function(t,e,s){var a=s(659);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(441)("33c249f8",a,!0)},714:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-container calendar-list-container"},[s("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:t.listQuery}},[s("el-form-item",{attrs:{label:"任务id"}},[s("el-input",{model:{value:t.listQuery.taskId,callback:function(e){t.listQuery.taskId=e},expression:"listQuery.taskId"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"加分区间"}},[s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:t.listQuery.addScoreStart,callback:function(e){t.listQuery.addScoreStart=e},expression:"listQuery.addScoreStart"}})],1),t._v(" "),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:t.listQuery.addScoreEnd,callback:function(e){t.listQuery.addScoreEnd=e},expression:"listQuery.addScoreEnd"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"惩罚分区间"}},[s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:t.listQuery.subScoreStart,callback:function(e){t.listQuery.subScoreStart=e},expression:"listQuery.subScoreStart"}})],1),t._v(" "),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:t.listQuery.subScoreEnd,callback:function(e){t.listQuery.subScoreEnd=e},expression:"listQuery.subScoreEnd"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"是否重复"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.isDuplicate,callback:function(e){t.listQuery.isDuplicate=e},expression:"listQuery.isDuplicate"}},t._l(t.selectOptions.isDuplicate,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"修改时间"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-seprate":"至"},model:{value:t.listQuery.updateTime,callback:function(e){t.listQuery.updateTime=e},expression:"listQuery.updateTime"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"操作账号"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.operator,callback:function(e){t.listQuery.operator=e},expression:"listQuery.operator"}},t._l(t.selectOptions.users,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.status,callback:function(e){t.listQuery.status=e},expression:"listQuery.status"}},t._l(t.selectOptions.status,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-form-item",[s("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),s("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"circle-close"},on:{click:t.clearFilter}},[t._v("清除")])],1)],1),t._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addTask()}}},[t._v("新增任务")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.setTask()}}},[t._v("任务基础设置")])],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"default-sort":{prop:"taskId",order:"aescending"},border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"任务id",width:"80",prop:"taskId"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.taskId))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"110px",label:"任务加分",prop:"addScore"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.addScore))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"100px",label:"提前结束任务惩罚",prop:"subScore"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("-"+t._s(e.row.subScore))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"90px",label:"是否可重复",prop:"isDuplicate"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.isDuplicate))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center","min-width":"120px",label:"备注","show-overflow-tooltip":"",prop:"memo"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.memo))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"180px",label:"修改时间",sortable:"",prop:"updateTime",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.updateTime))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"100px",label:"操作账号",prop:"operator"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"100px",label:"状态",sortable:"",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",[t._v(t._s(t._f("statusTextFilter")(e.row.status)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){t.setTaskStatus(e.row,1)}}},[t._v("下架")]):t._e(),t._v(" "),0!=e.row.status?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){t.setTaskStatus(e.row,0)}}},[t._v("上架")]):t._e()]}}])})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[s("el-pagination",{attrs:{"current-page":t.listQuery.pageNo,"page-sizes":[10,20,30,50],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.8a958add9fe2b858b8f0.js.map